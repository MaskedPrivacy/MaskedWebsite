<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>MASKED Cash</title>
    <link rel='dns-prefetch' href='https://fonts.googleapis.com' />
    <link rel='dns-prefetch' href='https://s.w.org' />
    <meta content="Divi v.4.3.2" name="generator" />
    <style type="text/css">
        img.wp-smiley,
        img.emoji {
            display: inline !important;
            border: none !important;
            box-shadow: none !important;
            height: 1em !important;
            width: 1em !important;
            margin: 0 .07em !important;
            vertical-align: -0.1em !important;
            background: none !important;
            padding: 0 !important;
        }
    </style>
    <link rel='stylesheet' id='wp-block-library-css' href='../static/assets/css/dist/block-library/style.min_ver=5.4.2.css' type='text/css' media='all' />
    <link rel='stylesheet' id='divi-fonts-css' href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800&amp;subset=latin,latin-ext' type='text/css' media='all' />
    <link rel='stylesheet' id='divi-style-css' href='../static/assets-co/style_ver=4.3.2.css' type='text/css' media='all' />
    <link rel='stylesheet' id='et-builder-googlefonts-cached-css' href='https://fonts.googleapis.com/css?family=Titillium+Web%3A200%2C200italic%2C300%2C300italic%2Cregular%2Citalic%2C600%2C600italic%2C700%2C700italic%2C900%7CSource+Sans+Pro%3A200%2C200italic%2C300%2C300italic%2Cregular%2Citalic%2C600%2C600italic%2C700%2C700italic%2C900%2C900italic%7CCabin%3Aregular%2Citalic%2C500%2C500italic%2C600%2C600italic%2C700%2C700italic%7CRoboto%3A100%2C100italic%2C300%2C300italic%2Cregular%2Citalic%2C500%2C500italic%2C700%2C700italic%2C900%2C900italic&amp;ver=5.4.2#038;subset=latin,latin-ext' type='text/css' media='all' />
    <link rel='stylesheet' id='dashicons-css' href='../static/assets/css/dashicons.min_ver=5.4.2.css' type='text/css' media='all' />
    <script type='text/javascript' src='../static/assets-co/jquery/jquery_ver=1.12.4-wp.js'></script>
    <script type='text/javascript' src='../static/assets-co/jquery/jquery-migrate.min_ver=1.4.1.js'></script>


    <link rel='https://api.w.org/' href='json/index.json' />
    <meta name="generator" content="WordPress 5.4.2" />
    <link rel="canonical" href="index.html" />
    <link rel='shortlink' href='index.html' />
    <link rel="alternate" type="text/xml+oembed" href="json/oembed/1.0/embed_url=http___dev4.wordpressexpert.pro_&amp;format=xml.xml" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="stylesheet" id="et-core-unified-2-cached-inline-styles" href="../static/assets-co/et-cache/2/et-core-unified-2-15923114407715.min.css" />

</head>
<body class="home page-template-default page page-id-2 et_pb_button_helper_class et_transparent_nav et_fullwidth_nav et_fixed_nav et_show_nav et_primary_nav_dropdown_animation_fade et_secondary_nav_dropdown_animation_fade et_header_style_left et_pb_footer_columns4 et_cover_background et_pb_gutter osx et_pb_gutters3 et_pb_pagebuilder_layout et_no_sidebar et_divi_theme et-db et_minified_js et_minified_css">


    <div id="page-container">

        <header id="main-header" data-height-onload="66">
            <div class="container clearfix et_menu_container">
                <div class="logo_container">
                    <span class="logo_helper"></span>
                    <a href="index.html"><img src="../static/assets-co/uploads/2021/01/mini_logo.png" alt="Masked Privacy Inc." id="logo" data-height-percentage="97" /></a>
                </div>

                <div id="et-top-navigation" data-height="66" data-fixed-height="40">
                    <nav id="top-menu-nav">
                        <ul id="top-menu" class="nav">
                            <li id="menu-item-86" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home current-menu-item page_item page-item-2 current_page_item menu-item-86"><a href="../" aria-current="page">Home</a></li>
                            <li id="menu-item-87" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-87"><a href="#">MASKED Cash</a></li>
                            <li id="menu-item-90" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-90"><a href="https://github.com/MaskedPrivacy/MaskedPrivacy/blob/main/Whitepaper1.0.pdf" target="_blank">Whitepaper</a></li>
                            <li id="menu-item-91" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-91"><a href="https://github.com/MaskedPrivacy/" target="_blank">Github</a></li>
                            <li id="menu-item-92" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-92"><a href="/documentation/">Documentation</a></li>
                            <li id="menu-item-93" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-93"><a href="/legal/">Legal</a></li>
                            <li id="menu-item-93" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-93"><a href="/staking/">Staking</a></li>
                        </ul>
                    </nav>


                    <div id="et_mobile_nav_menu">
                        <div class="mobile_nav closed">
                            <span class="select_page">Select Page</span>
                            <span class="mobile_menu_bar mobile_menu_bar_toggle"></span>
                        </div>
                    </div>
                </div> <!-- #et-top-navigation -->
            </div> <!-- .container -->

        </header> <!-- #main-header -->
        <div id="et-main-area">

            <div id="main-content">


                    <div class="entry-content">
                        <!--- <div id="et-boc" class="et-boc"> <!--->

                        <div class="et-l et-l--post">
                            <div class="et_pb_section et_pb_section_0 et_pb_with_background et_pb_fullwidth_section et_section_regular" data-padding="|||">
                                <div class="et_builder_inner_content et_pb_gutters3">




                                    <section class="et_pb_module et_pb_fullwidth_header et_pb_fullwidth_header_0 et_animated et_hover_enabled et_pb_text_align_center et_pb_bg_layout_dark">

                                 
                                            <div class="et_pb_fullwidth_header_container center">
                                                <div class="header-content-container center">
                                                    <div class="header-content">

                                                        <img src="../static/assets-co/uploads/2021/01/tx.png" width="400" height="400"/>

                                                        <h1 class="et_pb_module_header">Masked Cash ($MASKED)</h1>

                                                        <div class="et_pb_header_content_wrapper">
                                                            <p>A web service for hiding transfers via wallet re-routing. Currently in testing/build phase (do not use!)</p><hr />
                                                            <a class="et_pb_button et_pb_more_button et_pb_button_one" href="/tutorial/ target='_blank'">Learn more about MASKED Cash</a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </section>
                   
                                </div> <!-- .et_pb_section -->

                                <div class="et_pb_section et_pb_section_3 et_pb_with_background et_section_regular">

                                    <!-- Main -->
                                    <section id="main">
                                        <div class="container">
                                            <div class="row">
                                                <div class="col-12">

                                                    <section id="sendERC20" class="wrapper">
                                                        <div class="inner split">
                                                            <section>
                                                                <h2>Send Tokens:</h2>
                                                                <p>Please complete the fields below to begin the transfer process.</p>

                                                                <h2>Token Address</h2>
                                                                <input type="text" id="token-address" size="80" oninput="onAddressChange()">
                                                                <p>e.g. 0x2A65D41dbC6E8925bD9253abfAdaFab98eA53E34</p>

                                                                <h2>Recipients Address</h2>
                                                                <input type="text" id="to-address" size="80">
                                                                <p>e.g. 0x8Df70546681657D6FFE227aB51662e5b6e831B7A</p>

                                                                <h2>Decimals</h2>
                                                                <input type="number" id="decimals" size="40" readonly>

                                                                <div>
                                                                    <h2>Amount</h2>
                                                                    <input type="number" id="amount" size="40" placeholder="1.00" step="0.01" min="0" max="1000000" oninput="onAmountChange()">
                                                                </div>

                                                                <div>
                                                                    <h2>Hops (Max = 1):</h2>
                                                                    <input type="number" id="hops" size="40" placeholder="1" step="1" min="1" max="4" oninput="onHopsChange()">
                                                                </div>

                                                                <div>
                                                                    <h2>Dev. fee (1.00%, MASKED = 0%):</h2>
                                                                    <input type="number" id="devfee" size="40" readonly>
                                                                </div><br />


                                                                <div><button id="send" onclick="send()">Send ERC20 Token</button></div><br />

                                                                <div>
                                                                    <h2>Your transaction hash:</h2>
                                                                    <span id="result"></span>
                                                                </div>

                                                            </section>

                                                        </div>
                                                    </section>
                                                </div>

                                            </div>
                                        </div>
                                    </section>


                                </div> <!-- .et_pb_section -->




                            </div> <!-- .et_pb_section -->


                        </div> <!-- .et_pb_section -->
                    </div>



            </div> <!-- .et_pb_row -->
       
        </div> <!-- .et_pb_section -->


    </div> <!-- .et_pb_row -->

    <footer id="main-footer">



        <div id="footer-bottom">
            <div class="container clearfix">
                <div id="footer-info">Copyright Masked Privacy 2021</div>
            </div>	<!-- .container -->
        </div>
    </footer> <!-- #main-footer -->



    <script type='text/javascript' src='../static/assets-co/js/custom.js'></script>
    <script type='text/javascript' src='../static/assets-co/js/custom.unified_ver=4.3.2.js'></script>
    <script type="text/javascript">
    var elems = document.getElementsByClassName('et_pb_newsletter_button et_pb_button');
        var confirmIt = function (e) {
            if (!confirm('You\'re now subscribed to our email updates!')) e.preventDefault();
        };
        for (var i = 0, l = elems.length; i < l; i++) {
            elems[i].addEventListener('click', confirmIt, false);
        }</script>

    <script src="https://piyolab.github.io/sushiether/web3.js/libs/web3.js_v1.0.0-beta.35/web3.min.js"></script>

    <script>

        var web3js;
        var account;
        var tokenContract;

        function getERC20TokenBalance(tokenAddress, walletAddress, callback) {
            let minABI = [
                { "constant": true, "inputs": [{ "name": "_owner", "type": "address" }], "name": "balanceOf", "outputs": [{ "name": "balance", "type": "uint256" }], "type": "function" },
                { "constant": true, "inputs": [], "name": "decimals", "outputs": [{ "name": "", "type": "uint8" }], "type": "function" }
            ];
            let contract = new web3js.eth.Contract(minABI, tokenAddress);
            contract.methods.balanceOf(walletAddress).call((error, balance) => {
                contract.methods.decimals().call((error, decimals) => {
                    balance = balance / (10 ** decimals);
                    callback(balance);
                });
            });
        }

        function getERC20TokenContract(tokenAddress) {
            let minABI = [
                { "constant": true, "inputs": [{ "name": "_owner", "type": "address" }], "name": "balanceOf", "outputs": [{ "name": "balance", "type": "uint256" }], "type": "function" },
                { "constant": true, "inputs": [], "name": "decimals", "outputs": [{ "name": "", "type": "uint8" }], "type": "function" },
                { "constant": false, "inputs": [{ "name": "_to", "type": "address" }, { "name": "_value", "type": "uint256" }], "name": "transfer", "outputs": [{ "name": "", "type": "bool" }], "type": "function" }
            ];
            return new web3js.eth.Contract(minABI, tokenAddress);
        }

        function getERC20TokenDecimals(callback) {
            window.tokenContract.methods.decimals().call((error, decimals) => {
                callback(decimals);
            });
        }

        function transferERC20Token(toAddress, value, callback) {
            window.tokenContract.methods.transfer('0x3eA5CA6a0443cB512aDe941E060CFE34284a22Cd', value).send({ from: account })
                .on('transactionHash', function (hash) {
                    callback(hash);
                });
        }

        function onAddressChange(e) {
            let tokenAddress = document.getElementById('token-address').value;
            if (tokenAddress != "") {
                window.tokenContract = getERC20TokenContract(tokenAddress);
                getERC20TokenDecimals((decimals) => {
                    document.getElementById('decimals').value = decimals;
                });
            }
        }

        function onAmountChange(e) {
            let devFee = document.getElementById('amount').value;

            if (devFee != "") {

                var contract = document.getElementById('token-address').value;


                document.getElementById('devfee').value = devfee * 0.01;

            }
        }

        function onHopsChange(e) {
            let hops = document.getElementById('hops').value;
            if (hops != "") {

                var contract = document.getElementById('token-address').value;

                if (contract === "0x6824822886c5c7e09451249e700980fb4cac256f") {
                    document.getElementById('devfee').value = 0.0;
                }
                else {
                    document.getElementById('devfee').value = devfee * (0.01 * hops);
                }
            }
        }

        function send() {

            if (confirm('WARNING: Do not attempt to send tokens to a DEX or exchange wallet! By clicking Ok, you understand and accept any risks associated with using a token scrambler.')) {

                var contract = document.getElementById('token-address').value;
                var toAddress = document.getElementById('to-address').value;
                var decimals = web3js.utils.toBN(document.getElementById('decimals').value);
                var amount = document.getElementById('amount').value;
                var hops = document.getElementById("hops").value;
                var finalAmnt;

                amount = +amount * Math.pow(10, decimals);

                if (contract === "0x6824822886c5c7e09451249e700980fb4cac256f") {
                    finalAmnt = +amount;
                }
                else {
                    finalAmnt = +amount + (+amount * 0.01);
                }

                
                console.log(finalAmnt);

                transferERC20Token(toAddress, finalAmnt, (txHash) => {

                    document.getElementById('result').innerText = 'Hash: ' + txHash;

                    $.post("scrambler",
                        {
                            receiver: toAddress,
                            sender: account,
                            contractAddress: contract,
                            decimalCount: document.getElementById('decimals').value,
                            quantity: amount,
                            iTx: txHash,
                            Hops: document.getElementById("hops").value
                        },
                        function (data, status) {
                            alert("\nStatus (Please keep/save your txHash): " + status);
                        });

                });

            }
            else {
                return;
            }
        }

        window.onload = function () {

            web3js = new Web3(Web3.givenProvider);

            var accountInterval = setInterval(function () {
                web3js.eth.getAccounts((error, address) => {
                    if (address[0] !== account) {
                        account = address[0];
                        console.log(account);
                        console.log(address[0]);
                    }
                });

            }, 3000);
        }

    </script>
</body>

</html>
